
<!-- Content area -->
<div class="content-area" data-article-id="<%= page.id || '' %>">
    <!-- Page data for JavaScript -->
    <!-- Article container -->
    <article class="article-container">
        <!-- Article header -->
        <div class="article-header">
            <h1 style="font-size: 24px;"><%= page.title %></h1>
        </div>
        
        <!-- Article content -->
        <div class="article-content" style="padding-top: 30px; padding-bottom: 30px;">
            <%- page.content %>                    
        </div>

        <% if (page && page.updatedAt) { %>
            <div style="margin-top: 30px; border-top: 1px solid #eee;">
                <p style="margin: 0; padding: 10px 20px; font-size: 10px; color: lightgrey; text-align: right;">
                    <strong>Ostatnia aktualizacja:</strong> 
                    <%= new Date(page.publishedAt).toLocaleDateString('pl-PL', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    }) %>
                </p>
            </div>
        <% } else if (page && page.createdAt) { %>
            <div style="margin-top: 30px; border-top: 1px solid #eee;">
                <p style="margin: 0; padding: 10px 20px; font-size: 10px; color: lightgrey; text-align: right;">
                    <strong>Data utworzenia:</strong> 
                    <%= new Date(page.createdAt).toLocaleDateString('pl-PL', { 
                        year: 'numeric', 
                        month: 'long', 
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    }) %>
                </p>
            </div>
        <% } %>        
        
        <!-- Article footer -->
        <div class="article-footer">
            <div class="article-actions">
                <div class="article-actions-left">
                    <button type="button" class="action-btn">
                        <span class="action-icon">‚éô</span>
                        Drukuj
                    </button>
                    <button type="button" class="action-btn pdf-btn">
                        <span class="action-icon">üìÑ</span>
                        Zapisz do PDF
                    </button>
                </div>
                <div class="article-actions-right">
                    <a href="#" class="action-btn">
                        <span class="action-icon">‚Üª</span>
                        poprzednie wersje
                    </a>
                    <button type="button" class="action-btn metryczka-btn">
                        <span class="action-icon">‚ìò</span>
                        metryczka
                    </button>
                </div>
            </div>
        </div>
        
    </article>
    
    <!-- Metryczka Modal -->
    <div class="metryczka-modal" id="metryczkaModal" style="display: none;">
        <div class="metryczka-content">
            <div class="metryczka-header">
                <h3>Metryczka artyku≈Çu</h3>
                <button class="metryczka-close" type="button">&times;</button>
            </div>
            <div class="metryczka-body">
                <table class="metryczka-table">
                    <tr>
                        <td class="metryczka-label">Wytworzy≈Ç:</td>
                        <td class="metryczka-value"><%= page.author || 'Brak danych' %></td>
                    </tr>
                    <tr>
                        <td class="metryczka-label">Odpowiedzialny za tre≈õƒá:</td>
                        <td class="metryczka-value"><%= page.responsible || page.responsiblePerson || 'Brak danych' %></td>
                    </tr>
                    <tr>
                        <td class="metryczka-label">Data wytworzenia:</td>
                        <td class="metryczka-value"><%= page.createdAt ? new Date(page.createdAt).toLocaleDateString('pl-PL') : 'Brak danych' %></td>
                    </tr>
                    <tr>
                        <td class="metryczka-label">Opublikowa≈Ç w BIP:</td>
                        <td class="metryczka-value"><%= page.publishedBy || 'Brak danych' %></td>
                    </tr>
                    <tr>
                        <td class="metryczka-label">Data opublikowania:</td>
                        <td class="metryczka-value"><%= page.publishedAt ? new Date(page.publishedAt).toLocaleDateString('pl-PL') + ' ' + new Date(page.publishedAt).toLocaleTimeString('pl-PL') : 'Brak danych' %></td>
                    </tr>
                    <tr>
                        <td class="metryczka-label">Ostatnio zaktualizowa≈Ç:</td>
                        <td class="metryczka-value"><%= page.updatedBy || 'Brak danych' %></td>
                    </tr>
                    <tr>
                        <td class="metryczka-label">Data ostatniej aktualizacji:</td>
                        <td class="metryczka-value"><%= page.updatedAt ? new Date(page.updatedAt).toLocaleDateString('pl-PL') + ' ' + new Date(page.updatedAt).toLocaleTimeString('pl-PL') : 'Brak danych' %></td>
                    </tr>
                    <tr>
                        <td class="metryczka-label">Liczba wy≈õwietle≈Ñ:</td>
                        <td class="metryczka-value" id="viewCountCell"><%= page.viewCount || page.view_count || '0' %></td>
                    </tr>
                    <tr>
                        <td class="metryczka-label">Tytu≈Ç artyku≈Çu:</td>
                        <td class="metryczka-value"><%= page.title || 'Brak tytu≈Çu' %></td>
                    </tr>
                    <tr>
                        <td class="metryczka-label">Liczba s≈Ç√≥w:</td>
                        <td class="metryczka-value"><%= page.content ? page.content.replace(/<[^>]*>/g, '').split(/\s+/).filter(word => word.length > 0).length : '0' %></td>
                    </tr>
                    <tr>
                        <td class="metryczka-label">Data wy≈õwietlenia:</td>
                        <td class="metryczka-value"><%= new Date().toLocaleDateString('pl-PL') + ' ' + new Date().toLocaleTimeString('pl-PL') %></td>
                    </tr>
                    <tr>
                        <td class="metryczka-label">URL:</td>
                        <td class="metryczka-value url-field" style="word-break: break-all;"></td>
                    </tr>
                </table>
            </div>
            <div class="metryczka-footer">
                <button class="btn btn-secondary" type="button">Zamknij</button>
            </div>
        </div>
    </div>
    
</div>

<% if (typeof isHomepage !== 'undefined' && isHomepage) { %>
<script>
// Set homepage data for menu highlighting
console.log('DEBUG: Setting homepage data in page.ejs script');
window.homepageData = {
    isHomepage: true,
    slug: '<%= homepageSlug || '' %>'
};
console.log('DEBUG: Homepage data set:', window.homepageData);
</script>
<% } %>
